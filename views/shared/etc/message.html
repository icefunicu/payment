{% extends '../layout.html' %}
{%block head%}
<link rel="stylesheet" type="text/css" href="/public/css/message.css" />
<script type="text/javascript" src="/public/js/components/sals_screenShot.min.js"></script>
{%endblock%}

{% block content %}

<div class="msg-body">

    <div class="list use-list">

        {%for i in '122'%}

        <div class="list-item">
            <div class="item">
                <div class="avatar"><img src="/assets/6858f6417bd2da80a5dfe74417ea9ad2"></div>
                <div class="nickname">
                    <span class="title">用户昵称{{ i }} <label class="pull-right ui pink label">急</label></span>
                    <span class="desc">您好,我在武汉，你可以直接送过来吗，我有时间的话，可以自己过去拿</span>
                </div>
            </div>
        </div>

        {%endfor%}
   

    </div>
    <div class="container">
       
        <div class="content">
            <div class="item item-center"><span>昨天 12:35</span></div>
            <div class="item item-center"><span>你已添加了凡繁烦，现在可以开始聊天了。</span></div>
            <div class="item item-left"><div class="avatar"><img src="/assets/6858f6417bd2da80a5dfe74417ea9ad2" /></div><div class="bubble bubble-left">您好,我在武汉，你可以直接送过来吗，我有时间的话，可以自己过去拿<br/>！！！<br/>123</div></div>
            
            <div class="item item-right"><div class="bubble bubble-right">hello<br/>你好呀</div><div class="avatar"><img src="/assets/6572d90bfff6f494d7f42223fda3f3ff" /></div></div>
            <div class="item item-center"><span>昨天 13:15</span></div>
            <div class="item item-right"><div class="bubble bubble-right">刚刚不在，不好意思</div><div class="avatar"><img src="/assets/6572d90bfff6f494d7f42223fda3f3ff" /></div></div>
            <div class="item item-left"><div class="avatar"><img src="/assets/6858f6417bd2da80a5dfe74417ea9ad2" /></div><div class="bubble bubble-left">没事<br/>你继续！</div></div>
            <div class="item item-left"><div class="avatar"><img src="/assets/6858f6417bd2da80a5dfe74417ea9ad2" /></div><div class="bubble bubble-left">看到了<br/>在下面</div></div>
            <div class="item item-left"><div class="avatar"><img src="/assets/6858f6417bd2da80a5dfe74417ea9ad2" /></div><div class="bubble bubble-left">你发一个<br/>刚刚网卡了</div></div>
            <div class="item item-right"><div class="bubble bubble-right">可以<br/>一会儿再发给你</div><div class="avatar"><img src="/assets/6572d90bfff6f494d7f42223fda3f3ff" /></div></div>
        </div>
        <div class="msg-menu">
            <button class="ui icon button  popup-tool basic" data-content="表情"><i class="grin outline icon"></i></button>
            <button class="ui icon button  popup-tool basic" data-content="图片"><i class="file image outline icon"></i></button>
            <button class="ui icon button  popup-tool basic" data-content="文件"><i class="file outline icon"></i></button>
            <button class="ui icon button  popup-tool basic btn-cut-page" data-content="截屏"><i class="cut icon"></i></button>


        </div>
        
        <div class="input-area">
            <textarea name="text" id="textarea"></textarea>
            <div class="button-area">
                <div class="ui teal buttons small">
                    <div class="ui button">发送</div>
                    <div class="ui floating dropdown icon button">
                      <i class="dropdown icon"></i>
                      <div class="menu">
                        <div class="item">回车键发送</div>
                        <div class="item">Ctrl+回车键发送</div>
                      </div>
                    </div>
                  </div>
            </div>
        </div>
    </div>
</div>

<script>
    
    $('.dropdown').dropdown({ transition: 'drop'});

    $('.btn-cut-page').on('click',function(){
        alert('aaa')
         // 截图确认按钮回调函数
            const callback = (base64) =>{
                console.log(base64);
            }
            // 截图取消时的回调函数
            const closeFn = ()=>{
                console.log("截图窗口关闭");
            }
            new screenShotPlugin({enableWebRtc: true, completeCallback: callback,closeCallback: closeFn});
    })
    /**
 * 监控房间是否有商户进入/离开
 */
top.msg.Listening('room', function (users) {
    $('div.use-list').empty();
    $(users).each(function (index, user) {
        var u = `<div class="list-item" data-uid="${user.uid}">
            <div class="item">
                <div class="avatar"><img src="${user.avatar}"></div>
                <div class="nickname">
                    <span class="title">${user.name} </span> 
                </div>
            </div>
        </div>`;
        $('div.use-list').append(u); 
    })
});
$('div.use-list .list-item').on('click',function(){
    
})
</script>


{%endblock%}